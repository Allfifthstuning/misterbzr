# Description: 	An OBS Studio plugin that provides output capabilities to a Video4Linux2 device 
# URL: 		https://github.com/CatxFish/obs-v4l2sink
# Maintainer: 	Hans Bezemer, hbezemer at kliksafe dot nl
# Packager:	Hans Bezemer, hbezemer at kliksafe dot nl
# Depends on: 	obs-studio, qt5, cmake

name=obs-v4l2sink
version=0.1.0
obsversion=25.0.8
release=1
source=(
	https://github.com/CatxFish/obs-v4l2sink/archive/0.1.0.tar.gz
	https://github.com/obsproject/obs-studio/archive/${obsversion}.tar.gz
	https://github.com/CatxFish/obs-v4l2sink/pull/21.patch
)


build() {
	cd ${name}-${version}
	patch --forward --fuzz=0 --input="../21.patch" --strip=1
	mkdir build
	cd build
	cmake 	../ 				\
		-DCMAKE_BUILD_TYPE=Release 	\
		-DLIBOBS_INCLUDE_DIR="../../obs-studio-${obsversion}/libobs" \
		-DCMAKE_INSTALL_PREFIX=/usr 	
	make
	make DESTDIR=$PKG install
	}

