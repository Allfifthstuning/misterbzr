# Description: 	A modular patch bay for Jack/ALSA based audio/MIDI systems
# URL: 		https://gitlab.com/drobilla/patchage
# Maintainer: 	Hans Bezemer, hbezemer at kliksafe dot nl
# Packager:	Hans Bezemer, hbezemer at kliksafe dot nl
# Depends on: 	jack, alsa-lib, xorg, cmake, python, waf

name=patchage
version=1.0.4
release=1
source=(https://gitlab.com/drobilla/patchage/-/archive/v${version}/${name}-v${version}.tar.gz)

build() {
	cd ${name}-v${version}
	# copy custom waf scripts in place
	mkdir -pv tools
	touch __init__.py
	cp -av ./waflib/extras/autowaf.py tools/
        # remove vendored waflib
        #rm -rf waflib
        # modify wscript to use current scripts
        sed -e 's/waflib.extras/tools/' \
            -e "s/load('autowaf'/load('autowaf', tooldir='tools'/" \
            -i wscript
       
 	./waf configure --prefix=/usr
    	./waf
    	./waf install --destdir=$PKG
	}

